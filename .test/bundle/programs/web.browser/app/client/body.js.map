{"version":3,"sources":["meteor://ðŸ’»app/client/body.js"],"names":[],"mappings":"yBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/client/body.js","sourcesContent":["Meteor.subscribe(\"dates\");\nMeteor.subscribe(\"users\");\n\n\nTemplate.body.helpers({\n\tcurrentDate: function(){\n\t\treturn Dates.findOne({_id: Session.get(\"currentDate\")});\n\t},\n\tcurrentUser: function(){\n\t\treturn Users.findOne({_id: Session.get(\"currentUser\")});\n\t},\n\tdatestate: \"Nein, es haben sich zu wenige angemeldet.\",\n\tisSubscripted: false,\n\tuserbalance: \"3â‚¬\",\n\tsubscribers: function(){\n\t\t// console.log(currentDate.subscribers);\n\t\t// return currentDate.subscribers;\n\t\tif(Session.get(\"currentDate\")){\n\t\t\tvar subscriberIds = Dates.findOne({_id: Session.get(\"currentDate\")}).subscribers;\n\t\t\treturn Users.find({_id: {$in: subscriberIds}});\n\t\t}\n\t},\n\t//subscribers: [{name: \"Bob\"}, {name: \"Frank\"}, {name: \"Alice\"}],\n\tdates: function() {\n\t\treturn Dates.find({}, {sort: {date: 1}});\n\t},\n\tusers: function() {\n\t\treturn Users.find({});\n\t}\n});\n\nTemplate.body.events({\n\t\"click .unsubscribe\": function (event, template) {\n\t\tevent.preventDefault();\n\n    \tMeteor.call('setSubscription', Session.get(\"currentDate\"), template.find('.subscriberEmail').value, false, function (error, result) {\n    \t\t// console.log(\"result:\" + result);\n    \t});\n\t},\n\t\"click .subscribe\": function (event, template) {\n\t\tevent.preventDefault();\n\n    \tMeteor.call('setSubscription', Session.get(\"currentDate\"), template.find('.subscriberEmail').value, true, function (error, result) {\n    \t\t// console.log(\"result:\" + result);\n    \t});\n\n    },\n\t\"submit .createDate\": function (event) {\n      // Prevent default browser form submit\n      event.preventDefault();\n\n      // Get value from form element\n      var text = event.target.date.value;\n\n      // Insert a task into the collection\n      Meteor.call(\"createDate\", text);\n\n      // Clear form\n      event.target.date.value = \"\";\n    },\n    \"submit .createUser\": function (event) {\n      // Prevent default browser form submit\n      event.preventDefault();\n\n      // Get value from form element\n      var text = event.target.email.value;\n\n      // Insert a task into the collection\n      Meteor.call(\"createUser\", text);\n\n      // Clear form\n      event.target.email.value = \"\";\n    }\n});\n\nTemplate.user.events({\n\t\"click .deleteUser\": function() {\n\t\tMeteor.call(\"deleteUser\", this._id);\n\t}\n});\n\nTemplate.date.events({\n\t\"click .deleteDate\": function() {\n\t\tMeteor.call(\"deleteDate\", this._id);\n\t},\n\t\"click .makeCurrent\": function() {\n\n\t\tSession.set(\"currentDate\", this._id);\n\t}\n});\n"]}